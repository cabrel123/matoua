<template>
  <div class="page">
    <div class="navbar">
      <div class="navbar-bg"></div>
      <div class="navbar-inner sliding">
        <div class="left">
          <a class="link back">
            <i class="icon icon-back"></i>
          </a>
        </div>
        <div class="title">Mon compte</div>
      </div>
    </div>
    <!-- Begin: Page Content -->
    <div class="page-content">
      <div class="profile-header">
        <img
          class="user-avatar img-circle"
          src="assets/img/driver-m.png"
          alt="Avatar"
        />
        <div class="user-name" id="fullname"></div>
        <div class="buttons-row user-actions">
          <button
            type="button"
            class="button button-fill color-pink"
            @click="${signOut}"
          >
            <i class="icon material-icons">logout</i> Déconnexion
          </button>
        </div>
      </div>

      <div class="toolbar tabbar tabbar-scrollable tabbar-inline">
        <div class="toolbar-inner">
          <a href="#tab-overview" class="tab-link active">Vue d'ensemble</a>
          <a href="#tab-skills" class="tab-link">Historique</a>
          <a href="#tab-experience" class="tab-link">Parrainage</a>
        </div>
      </div>

      <div class="tabs">
        <div id="tab-overview" class="tab active">
          <div class="card">
            <div class="card-content">
              <div class="card-content-inner">
                <p>
                  Neque porro quisquam est qui dolorem ipsum quia dolor sit
                  amet, consectetur, adipisci velit.
                </p>
                <p>
                  At vero eos et accusamus et iusto odio dignissimos ducimus qui
                  blanditiis praesentium voluptatum deleniti atque corrupti quos
                  dolores et quas molestias excepturi sint occaecati cupiditate
                  non provident, similique sunt in culpa qui officia deserunt
                  mollitia animi, id est laborum et dolorum fuga.
                </p>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-content">
              <div class="card-content-inner">
                <div class="list-block no-hairlines no-hairlines-between">
                  <ul>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="item-title">
                            <i class="material-icons">person_outline</i>
                          </div>
                          <div class="item-after">Praveen Mujawdiya</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="item-title">
                            <i class="material-icons">cake</i>
                          </div>
                          <div class="item-after">December 22, 1991</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="item-title">
                            <i class="material-icons">place</i>
                          </div>
                          <div class="item-after">Indore, India</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="item-title">
                            <i class="material-icons">call</i>
                          </div>
                          <div class="item-after">+91-9876543210</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="item-title">
                            <i class="material-icons">mail_outline</i>
                          </div>
                          <div class="item-after">
                            praveen.mujawdiya@gmail.com
                          </div>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-content">
              <div class="card-content-inner">
                <div class="list-block no-hairlines no-hairlines-between">
                  <ul>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="item-title">
                            <i class="fa fa-fw fa-lg fa-briefcase"></i>
                          </div>
                          <div class="item-after">
                            Founder, The Code Brewery
                          </div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="item-title">
                            <i class="fa fa-fw fa-lg fa-graduation-cap"></i>
                          </div>
                          <div class="item-after">
                            Masters in Computer Science
                          </div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="item-title">
                            <i class="material-icons">language</i>
                          </div>
                          <div class="item-after">English and Hindi</div>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-content">
              <div class="card-content-inner text-center">
                <a
                  target="_blank"
                  href="https://twitter.com"
                  class="external"
                  title="Twitter"
                >
                  <i class="fa-stack fa-lg">
                    <span class="fa fa-circle fa-stack-2x color-twitter"></span>
                    <span class="fa fa-twitter fa-stack-1x fa-inverse"></span>
                  </i>
                </a>
                <a
                  target="_blank"
                  href="https://linkedin.com"
                  class="external"
                  title="LinkedIn"
                >
                  <i class="fa-stack fa-lg">
                    <span
                      class="fa fa-circle fa-stack-2x color-linkedin"
                    ></span>
                    <span class="fa fa-linkedin fa-stack-1x fa-inverse"></span>
                  </i>
                </a>
                <a
                  target="_blank"
                  href="https://pinterest.com"
                  class="external"
                  title="Pinterest"
                >
                  <i class="fa-stack fa-lg">
                    <span
                      class="fa fa-circle fa-stack-2x color-pinterest"
                    ></span>
                    <span class="fa fa-pinterest fa-stack-1x fa-inverse"></span>
                  </i>
                </a>
                <a
                  target="_blank"
                  href="https://dribbble.com"
                  class="external"
                  title="Dribbble"
                >
                  <i class="fa-stack fa-lg">
                    <span
                      class="fa fa-circle fa-stack-2x color-dribbble"
                    ></span>
                    <span class="fa fa-dribbble fa-stack-1x fa-inverse"></span>
                  </i>
                </a>
                <a
                  target="_blank"
                  href="https://behance.com"
                  class="external"
                  title="Behance"
                >
                  <i class="fa-stack fa-lg">
                    <span class="fa fa-circle fa-stack-2x color-behance"></span>
                    <span class="fa fa-behance fa-stack-1x fa-inverse"></span>
                  </i>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div id="tab-skills" class="tab">
          <div class="card">
            <div class="card-content">
              <div class="card-content-inner">
                <div class="list-block no-hairlines no-hairlines-between">
                  <ul class="skills-list">
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="skill-title">HTML</div>
                          <div
                            data-progress="95"
                            class="progressbar color-deeporange"
                          ></div>
                          <div class="skill-proficiency">95</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="skill-title">CSS</div>
                          <div
                            data-progress="85"
                            class="progressbar color-blue"
                          ></div>
                          <div class="skill-proficiency">85</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="skill-title">JavaScript</div>
                          <div
                            data-progress="80"
                            class="progressbar color-amber"
                          ></div>
                          <div class="skill-proficiency">80</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="skill-title">PhoneGap</div>
                          <div
                            data-progress="85"
                            class="progressbar color-bluegray"
                          ></div>
                          <div class="skill-proficiency">85</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="skill-title">PHP</div>
                          <div
                            data-progress="90"
                            class="progressbar color-purple"
                          ></div>
                          <div class="skill-proficiency">90</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-inner">
                          <div class="skill-title">MySQL</div>
                          <div
                            data-progress="95"
                            class="progressbar color-teal"
                          ></div>
                          <div class="skill-proficiency">95</div>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="tab-experience" class="tab">
          <div class="card">
            <div class="card-content">
              <div class="card-content-inner">
                <div
                  class="list-block media-list no-hairlines no-hairlines-between"
                >
                  <ul>
                    <li>
                      <div class="item-content">
                        <div class="item-media">
                          <img
                            src="https://logo.clearbit.com/airbnb.co.in?s=48"
                            alt="Airbnb"
                          />
                        </div>
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">Creative Lead</div>
                          </div>
                          <div class="item-subtitle">Airbnb, Inc.</div>
                          <div class="item-text">March 2016 - Present</div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-media">
                          <img
                            src="https://logo.clearbit.com/snapchat.com?s=48"
                            alt="Snapchat"
                          />
                        </div>
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">Product Designer</div>
                          </div>
                          <div class="item-subtitle">Snapchat, Inc.</div>
                          <div class="item-text">
                            January 2014 - February 2016
                          </div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="item-content">
                        <div class="item-media">
                          <img
                            src="https://logo.clearbit.com/instagram.com?s=48"
                            alt="Instagram"
                          />
                        </div>
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">UI/UX Specialist</div>
                          </div>
                          <div class="item-subtitle">Instagram</div>
                          <div class="item-text">
                            March 2012 - December 2013
                          </div>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End: Page Content -->
  </div>
</template>
<style>
  .tabs .tab.active {
    display: block;
  }
  .profile-header {
    align-items: center;
    background-color: #2e2b33;
    background-image: url("../assets/img/bg-user-profile.svg");
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 32px 16px;
    text-align: center;
  }

  .profile-header .user-avatar {
    border: 3px solid #ffffff;
    height: 80px;
    width: 80px;
  }

  .profile-header .user-name {
    color: rgba(255, 255, 255, 0.87);
    margin-bottom: 8px;
    margin-top: 8px;
  }

  .profile-header .user-actions {
    margin-top: 8px;
    width: 100%;
  }

  .skills-list .skill-title {
    font-size: 12px;
    margin-right: 8px;
    text-align: left;
    width: 96px;
  }

  .skills-list .skill-proficiency {
    font-size: 12px;
    margin-left: 8px;
    text-align: right;
    width: 16px;
  }

  #tab-experience .list-block .item-title {
    -webkit-box-orient: vertical;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-height: 20px;
    margin-bottom: 6px;
    white-space: normal;
  }

  #tab-experience .list-block .item-subtitle {
    -webkit-box-orient: vertical;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-height: 18px;
    margin-bottom: 6px;
    white-space: normal;
  }

  #tab-portfolio .card .card-content-inner {
    padding-bottom: 8px;
    padding-top: 8px;
  }

  #tab-portfolio .image-gallery .image-wrapper {
    margin-bottom: 3px;
    margin-top: 8px;
    position: relative;
  }

  #tab-portfolio .image-gallery img {
    width: 100%;
  }

  #tab-portfolio .image-gallery .image-caption {
    background-color: rgba(0, 0, 0, 0.7);
    bottom: 6px;
    box-sizing: border-box;
    color: rgba(255, 255, 255, 0.87);
    font-size: 11px;
    padding: 4px 8px;
    position: absolute;
    text-align: center;
    width: 100%;
  }
  .md .tabbar:not(.tabbar-icons) .tab-link-highlight {
    height: 4px;
    top: 0px;
  }
</style>
<script>
  export default (props, { $f7, $on }) => {
    $on("pageInit", (e, page) => {
      console.log("pageInit", page);
      const fullname = localStorage.getItem("fullname");
      const email = localStorage.getItem("email");
      const phone = localStorage.getItem("phone");
      const dateofbirth = localStorage.getItem("dateofbirth");
      const gender = localStorage.getItem("gender");
      const address = localStorage.getItem("address");
      const cni = localStorage.getItem("cni");

      $("#fullname").html(fullname);
    });

    const signOut = () => {
      const token = localStorage.getItem("token");

      // API endpoint for creating a new user
      const apiUrl = "http://matoua.com/api/logout";

      // Make a POST request using the Fetch API
      fetch(apiUrl, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
      })
        .then((response) => {
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          return response.json();
        })
        .then((newUserData) => {
          localStorage.clear();
          app.dialog.alert("Déconnexion effectuée avec succès !");

          app.views.main.router.navigate("/walkthrough/");
        })
        .catch((error) => {
          console.error("Error:", error);
        });
    };

    return $render;
  };
</script>
